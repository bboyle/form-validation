/*! Form validation - v1.0.1 - 2014-03-23
* https://github.com/bboyle/form-validation
* Copyright (c) 2014 Ben Boyle; Licensed MIT */
(function(t){"use strict";var i=1e4,e='<div class="status warn"><div class="inner"><h2>Please check your answers</h2><ol></ol></div></div>',n="input, select, textarea",a=function(){return!(this.disabled||this.validity.valid)},l="formValidation",r=function(t,i){var e=this.data(l)||this.data(l,{}).data(l);return t!==void 0?i!==void 0?(e[t]=i,i):e[t]!==void 0?e[t]:null:e},o=function(i,e){return this.map(function(n,a){var l=t(a),r=null,o=null;return"object"==typeof e&&"group"===e.level?o=l.formValidation("group").find(i)[0]:l.is(":radio, :checkbox")?o=l.closest("fieldset").find(i)[0]:(r=l.closest("form").find('label[for="'+a.id+'"]'),o=r.children(i)[0],o||".hint"===i&&(r.append('<small class="hint"></small>'),o=r.children(i)[0])),o})},s=function(){var i,e,l=t(this),r=l.formValidation("alert");this.validity.valid?(l.formValidation("question").find(".alert").filter(r).length>0?r.remove():(e=l.formValidation("group").find(n).filter(a),e.length>0?r.text(e.formValidation("getValidationMessage")):r.remove()),l.parentsUntil("form",".invalid").filter(function(){return 0===t(this).find(n).filter(a).length}).removeClass("invalid").find(".alert").remove()):(0===r.length&&(r=t('<em class="alert"/>')),r.text(l.formValidation("getValidationMessage")),l.formValidation("group").hasClass("atomic")&&(i={level:"group"}),l.formValidation("label",i).parent().find('.label, abbr[title="(required)"]').eq(-1).after(r))},d=function(){var i=t(this).closest("form"),a=i.find(n).filter(function l(){if(this.disabled)return!1;if(l.cache){if(l.cache[this.name]===!0)return!1}else l.cache={};return l.cache[this.name]=!0,this.validity&&!this.validity.valid}),o=r.call(i,"summaryElement")||r.call(i,"summaryElement",t(e)),s=o.find("ol"),d=!0;return a.length>0&&(s.find("li").remove(),a.each(function(){var i=t(this),e=i.formValidation("group"),n=i.formValidation("label",{level:e.length>0?"group":null}),a=n[0].id||n.generateId("label-"+this.id)[0].id,l=r.call(i,"summaryElement")||r.call(i,"summaryElement",t('<li><a href="#'+a+'"></a></li>'));0===e.length||e[0]!==d?(d=e[0],l.find("a").text(n.text().replace(/\?$/,"")+": "+i.formValidation("getValidationMessage")).end().appendTo(s)):l.remove()})),a.length},u=function(i){var e=d.call(this),l=t(this);return l.find(".invalid").filter(function(){return 0===t(this).find(n).filter(a).length}).removeClass("invalid").find(".alert").remove(),e>0?(i.stopImmediatePropagation(),i.preventDefault(),function(i){var e=r.call(i,"summaryElement");i.prev(".status").not(e).remove(),i.before(e.fadeIn()),t(window).scrollTo(e)}(l),l.find(n).filter(a).each(function(){s.call(this)}).parentsUntil("form",".questions > li").not(".section, .compact").addClass("invalid"),l.trigger("x-invalid"),!1):void 0},f=function(e){var n,a=e.timeStamp||t.now(),l=t(this),o=r.call(l,"summaryElement");return o&&o.remove(),n=r.call(l,"lastSubmitTimeStamp"),n&&i>a-n?(e.stopImmediatePropagation(),e.preventDefault(),!1):(r.call(l,"lastSubmitTimeStamp",a),void 0)},c={alert:function(){return this.map(function(i,e){var n,a=t(e);return a.is(":radio, :checkbox")===!0?a.closest("fieldset").find("legend > .alert")[0]:(n=a.formValidation("group").filter(".atomic"),n.length>0?n.find("legend > .alert")[0]:t('label[for="'+e.id+'"] > .alert')[0])})},label:function(t){return o.call(this,".label",t)},hint:function(t){return o.call(this,".hint",t)},question:function(i){return"object"==typeof i&&"group"===i.level?this.formValidation("group"):this.map(function(i,e){return t(e).parentsUntil("form",".questions > li")[0]})},group:function(){return this.map(function(i,e){return t(e).parentsUntil("form",".group").filter(function(){return t(this).children("fieldset").length>0})[0]})},validate:function(){return this.each(function(){t(this).closest("form").attr("novalidate",!0).unbind("submit",f).unbind("submit",u).bind("submit",u).bind("submit",f).find(n).unbind("change",s).bind("change",s)})},getValidationMessage:function(){var t=this[0].validity;return t===void 0||t.valid===!0?"":t.valueMissing?"Must be completed":t.customError?this[0].validationMessage:t.typeMismatch?"Must be an email address":t.patternMismatch?"Must use the format shown":"Must be a valid answer"}};t.fn.formValidation=function(i){return c[i]?c[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(t.error("Method "+i+" does not exist on jQuery.formValidation"),void 0):c.init.apply(this,arguments)},t.fn.forcesForms=t.fn.formValidation})(jQuery);